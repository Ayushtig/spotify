<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Amusify - Web Player: Music For Everyone</title>
    <link rel = "icon" href =  "../images/image-removebg-preview.png" type = "image/x-icon"> 
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
  </head>
  <style>*{
    margin: 0;
    padding: 0%;
    box-sizing: border-box;
    font-family:system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif ;
    color: #e0dfdf;
  }
  html,body{
    height: 100%;
    width: 100%;
    /* padding: 10px; */
  }
  input,button{
    color: #000;
  }
  .song{
    height: 260px;
    position: relative;
    width: 180px; 
    /* margin-left: 300px; */
    background-color: #000;
    border-radius: 7px;
    transition: all cubic-bezier(0.19, 1, 0.22, 1)0.3s;
  }
  .song h4{
    font-weight: 500;
  }
  .song p{
    font-size: 13px;
    font-weight: 300;
    word-spacing: 0.05cm;
    letter-spacing: 0.02cm;
  }
  .song:hover{
    background-color: #232323;
  }
  .song img{
    margin-left: 10px;
    width: 150px;
    height: 180px;
    object-fit: cover;
    border-radius: 7px;
    margin-bottom: 10px;
  }
  .song h4,.song p{
    color: #fff;
    max-width: 170px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  *{
  margin: 0;
  padding: 0%;
  box-sizing: border-box;
  font-family:system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif ;
  color: #e0dfdf;
}
html,body{
  height: 100%;
  width: 100%;
}
#main{
  min-height: 100%;
  width: 100%;
  display: flex;
  gap:10px;
  overflow-x: hidden;
  background-color: #000;
}
.left{
  /* height: 100%; */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content:flex-start ;
  width: 20%;
  background-color: #121212;
}
#left{
  width: 20%;
  height: 15%;
  position: fixed;
}
.left button{
  font-size: 20px;
  font-weight: 500;
  color: rgb(196, 196, 196);
  background-color: transparent;
  outline: none;
  border: none;
  width: 100%;
  display: flex;
  padding: 16px;
  gap: 25px;
  cursor: pointer;
  align-items: center;
  text-align: center;
}
.left button:hover{
  background-color: #222;
  color: #fff;
}
.left button a{
  text-decoration: none;
  font-size: 16px;
}
.right{
  width: 80%;
  padding-right: 10px;
  background-color:#121212;
}
#right-nav{
  z-index: 999;
  background-color:#252525;
  width: 80%;
  height: 70px;
  display: flex;
  padding: 20px;
  margin-bottom: 10px;
  position: fixed;
  align-items: center;
  justify-content: space-between;
}
#right-nav #part1{
  width: 10%;
  transition: all cubic-bezier(0.19, 1, 0.22, 1)0.3s;
}
#part1 i{
  border-radius: 50%;
  background-color: #1919196b;
  padding: 3px;
  font-size: 27px;
}
#part1 i:hover{
  background-color: #191919;
}
#right-nav #part2{
  width: 20%;
  display: flex;
  align-items: center;
  justify-content: space-around;
  font-size: 20px;
  transition: all cubic-bezier(0.19, 1, 0.22, 1)1s;
}
#part2 button{
  border-radius: 20px;
  padding: 5px;
  width: 130px;
  height: 30px;
  background-color: #fff;
  color: #000;
  border: none;
  outline: none;
  font-weight: 500;
}
#part2 button:hover{
  scale:1.1;
}
#part2 i{
  border-radius: 50%;
  background-color: #1919196b;
  padding: 5px;
  font-size: 17px;
}
#part2 i:hover{
  scale: 1.2;
  color: #fff;
}
.right-con{
  width: 100%;
  height: 50px;
  margin-top: 80px;
  top: 50%;
  left: 50%;
  transform: translate(3%,20%);
}
.right-con input{
  width: 50%;
  font-size: 16px;
  padding-left:30px ;
  background-color: #2e2e2e;
  height: 40px;
  color: #e0dfdf;
  border: none;
  outline: none ;
  border-radius: 15px;
}
.right-con input:hover{
  border: 1px solid white;
}
.right-con button{
  margin-left: 50px;
  padding: 8px;
  width: 100px;
  font-size: 16px;
  border-radius: 20px;
  background-color: #2e2e2e;
  color: #e0dfdf;
  border: none;
  outline: none;
  border: 1px solid #828080;
  transition: all cubic-bezier(0.19, 1, 0.22, 1)0.5s;
}
.right-con button:hover{
  border: 1px solid white;
  color: #fff;
}
#free{
  width: 100%;
  height: 130px;
}
#player{
  background-color: #000;
  width: 100%;
  height: 100px;
  position: fixed;
  bottom: 2px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
#player-left{
  width: 25%;
  height: 100%;
}
.left-song{
  height: 90%;
  width: 300px;
  margin: 5px;
  margin-left: 20px;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 5%;
}
.left-song img{
  width: 33%;
  height: 100%;
  object-fit: cover;
  border-radius: 5px;
  margin-bottom: 3px;
}
.left-song>#text1{
  width: 150px;
  color: #e0dfdf;
}
#text1 h6{
  font-weight: 100;
}
.left-song i{
  color: #fff;
  font-size: 20px;
  transition: all cubic-bezier(0.19, 1, 0.22, 1)0.3s;
}
#player-mid{
  width: 50%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
#player-right{
  width: 25%;
  height: 100%;
}
audio{
  width: 70%;
  position: relative;
  filter: sepia(20%) saturate(70%) grayscale(1) contrast(99%) invert(12%);
}
.right1{
  height: fit-content ;
  width: 100%;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
}
.right1 .musics{
  height: auto;
  position: relative;
  background-color: #151515;
  width: fit-content;
}
</style>



<body>
    <div id="main">
      <div class="left">
        <div id="left">

          <button>
            <i class="ri-home-fill"></i>
            <a href="/">Home</a>
          </button>
          <button>
            <i class="ri-search-fill"></i>
            <a id="search" href="/search">Search</a>
          </button>
        </div>
      </div>
      <div class="right">
        <div id="right-nav">
          <div id="part1">
            <i class="ri-arrow-left-s-line"></i>
            <i class="ri-arrow-right-s-line"></i>
          </div>
          <div id="part2">
            <button>Explore Premium</button>
            <i class="ri-notification-4-line"></i>
            <i class="ri-team-line"></i>
            <i class="ri-user-line"></i>
          </div>
        </div>
               <div class="right-con">
                <div id="right-top">
                  <input class="input-field" type="text" id="search-bar" placeholder="What do you want to listen to?">
            <button id="search-button" onclick="searchSong()">search</button>
        
            <div class="right1">
                <div class="musics">
        
                </div>
            </div>
            
                </div>
               </div>     
      <div id="free"></div>
    </div>
    </div>
    <div id="player">
      <div id="player-left">
        <div class="left-song">
          <img id="img" src="" alt="" />
          <div class="text1">
            <h5 id="h5">SongName</h5>
            <h6 id="h6">Artist</h6>
          </div>
          <i id="player-left-like" class="ri-heart-fill"></i>
        </div>
      </div>
      <div id="player-mid">
        <audio src="" controls></audio>
      </div>
      <div id="player-right"></div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js" integrity="sha512-WrdC3CE9vf1nBf58JHepuWT4x24uTacky9fuzw2g/3L9JkihgwZ6Cfv+JGTtNyosOhEmttMtEZ6H3qJWfI7gIQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      var flag=0;
      var like=document.querySelector('#player-left-like');
      var title="";
      var poster="";
      var artist="";
      

      function songCardClicked(fileName,title,poster,artist){
        document.querySelector('audio').setAttribute('src',`/stream/${fileName}`);
        document.querySelector('audio').play();
        title=title;
        poster=poster;
        artist=artist;
        document.querySelector("#h5").innerHTML=title;
        document.querySelector("#h6").innerHTML=artist;
        document.querySelector("#img").src=poster;
      }
      

      like.addEventListener('click',function(){
        if(flag==0){
        like.style.color="#1DB954";
        flag=1;
        like.style.scale=2;
        setInterval(() => {
          like.style.scale=1;
        }, 800);
      }
      else{
        like.style.color="#fff";
        flag=0;
      }
      })


      async function searchSong(){
    const result=await axios.post('/search',{
        search:document.querySelector('input').value
    
    })
    let clutter=''

    result.data.songs.forEach(song => {
        clutter+= `<div class="song" onclick="songCardClicked('${song.fileName}','${song.title}','/poster/${song.poster}','${song.artist}')">
            
            <img src="/poster/${song.poster}" alt="" />
            <div class="text">
              <h4>${song.title}</h4>  
              <p>${song.artist}</p>
              <p>${song.album}</p>        
   `
        });
        document.querySelector('.musics').innerHTML+=clutter;
    }

    </script>

  </body>
</html>
